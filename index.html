<!DOCTYPE html>
<html lang="en">
<head>

<meta charset="utf-8" />
<meta name="viewport" content="width=device-width, initial-scale=1" />

<link rel="apple-touch-icon" sizes="180x180" href="/assets/apple-touch-icon.png">
<link rel="icon" type="image/png" sizes="32x32" href="/assets/favicon-32x32.png">
<link rel="icon" type="image/png" sizes="16x16" href="/assets/favicon-16x16.png">
<link rel="manifest" href="/assets/site.webmanifest">

<meta name="description" 
content="Paste in a recipe and scale it up or down. Also a constraint satisfaction solver, why not." />

<!-- Open Graph / Facebook -->
<meta property="og:type" content="website" />
<meta property="og:url" content="https://reciplier.dreev.es/" />
<meta property="og:title" content="Reciplier - Recipe multiplier and Calculator Calculator" />
<meta property="og:description" content="Paste in a recipe and scale it up or down. Also a constraint satisfaction solver, why not." />
<meta property="og:image" content="https://reciplier.dreev.es/assets/reciplier-robot.png" />
<meta property="og:image:width" content="1024" />
<meta property="og:image:height" content="1024" />

<!-- Twitter -->
<meta property="twitter:card" content="summary_large_image" />
<meta property="twitter:url" content="https://reciplier.dreev.es/" />
<meta property="twitter:title" content="Reciplier - Recipe multiplier" />
<meta property="twitter:description" content="Paste in a recipe and scale it up or down. Also a constraint satisfaction solver, why not." />
<meta property="twitter:image" content="https://reciplier.dreev.es/assets/reciplier-robot.png" />

<link rel="stylesheet" href="style.css" />

<title>Reciplier</title>

</head>
<body>

<div class="help-float">
  <button
    id="helpButton"
    type="button"
    class="help-button"
    aria-label="Auxilium"
    aria-haspopup="dialog"
    aria-expanded="false"
  >?</button>

  <div
    id="helpPopover"
    class="help-popover"
    role="dialog"
    aria-label="Auxilium"
    hidden
  >
    <div class="help-popover-inner text-sm text-gray-600">
<h3>Reciplier: The Recipe Multiplier</h3>
<p>
Basic usage is pretty self-explanatory.
Paste in a recipe and replace quantities with expressions in curly braces.
Like "3 eggs" becomes 
<span class="font-mono">{3x} eggs</span> 
and then at the end of the recipe include a line like
<span class="font-mono">Scaled by {x:1}</span>.
The things in curly braces are called cells and they get rendered as fields you can edit.
Change any field and the rest adjust themselves.
</p>
<h3>Advanced Usage</h3>
<p>
It turns out this is kind of a free-form spreadsheet and constraint solver.
You can include equations in cells and Reciplier tries to find an assignment of values to all the variables that satisfies all the equations.
Like if you include
<span class="font-mono">{a}^2 + {b}^2 = {c}^2 = {a^2 + b^2 = c^2}</span>
in the recipe template, you have a nifty interface for finding Pythagorean triples.
(Btw, "2x" is short for "2*x" but "x2" is just a variable, not "x*2".)
</p>
<h3>Credits and Colophon</h3>
<p>
This was originally vibe-coded by Cantor Soule-Reeves and Daniel Reeves with
<a href="https://claude.ai" title="This was before Sonnet 4.5; not sure which exactly">Claude</a>
and then mostly
<a href="https://codebuff.com/referrals/ref-146ce36c-53e8-435c-a7f6-e180206dd0ee" title="Referral link that gets you (and me, dreev) free credits">Codebuff</a>
for a while and then a mix of a bunch of things.
See 
<a href="https://calca.io" target="_blank">Calca.io</a>
for an example of some prior art.
      </p>
      <p>
<a href="https://github.com/dreeves/reciplier">Source code on GitHub</a>.
      </p>
    </div>
  </div>
</div>

<div class="reciplier-container">
  <h1 class="text-2xl font-bold mb-4">Reciplier</h1>
  
  <div class="mb-6">
    <div class="mb-2">
      <select id="recipeSelect" class="p-2 border rounded text-gray-700">
        <!-- Options will be populated dynamically from script.js -->
      </select>
    </div>

    <textarea 
      id="recipeTextarea"
      class="w-full p-3 border rounded h-40"
      placeholder="Recipe syntax is like {2x} cups flour, scaled by {x:1}"
    ></textarea>
  </div>
  
  <div id="sliderPanel" class="mb-4"></div>
  
  <div id="recipeOutput" class="bg-gray-50 p-4 rounded recipe-output mb-4" style="display: none;">
    <!-- Recipe output will be generated here -->
  </div>
  
  <div class="relative" id="copySection" style="display: none;">
    <button
      id="copyButton"
      class="w-full bg-gray-100 text-gray-800 py-2 rounded mb-2"
    >
      Copy Snapshot to Clipboard
    </button>
    <div id="notification" class="notification text-center" style="display: none;"></div>
  </div>
  
  <div class="text-center text-gray-400 text-sm mt-4">
    <div class="text-gray-300 text-xs mt-1">
      v2026.01.25-d
    </div>
  </div>

  <!-- TEMPORARY DEBUG PANEL -->
  <br>&nbsp;<br>
  <br>&nbsp;<br>
  <!-- Add "open", without quotes, as a boolean attribute on <details> to
       default to expanded rather than collapsed. -->
  <details id="debugPanel" class="debug-panel"> 
    <summary class="debug-header">UI Experiments ‚ö†Ô∏è (normal users ignore this)</summary>
    <div class="debug-content">
      <div class="debug-section">
        <div class="debug-label">Invisible triggers:</div>
        <div class="debug-options">
          <label><input type="checkbox" data-trigger-mode="dblclick"> <s>Double-click</s></label>
          <label><input type="checkbox" data-trigger-mode="tripleclick"> Triple-click</label>
          <label><input type="checkbox" data-trigger-mode="longpress"> Long-press</label>
          <label><input type="checkbox" data-trigger-mode="borderclick"> Border-click</label>
          <label><input type="checkbox" data-trigger-mode="modclick"> Modifier+click</label>
          <label><input type="checkbox" data-trigger-mode="rightclick"> Right-click</label>
        </div>
      </div>
      <div class="debug-section">
        <div class="debug-label">Visual triggers:</div>
        <div class="debug-options">
          <label><input type="checkbox" data-trigger-mode="cornerpin"> üìå Corner pin</label>
          <label><input type="checkbox" data-trigger-mode="edgedots"> ‚óè Edge dots</label>
          <label><input type="checkbox" data-trigger-mode="brackets"> ‚åú‚åü Brackets</label>
          <label><input type="checkbox" data-trigger-mode="hoverglow"> ‚ú® Hover glow</label>
        </div>
      </div>
      <div class="debug-section">
        <div class="debug-label">Edge threshold (border-click &amp; hover-glow): <span id="borderThresholdValue">5</span>px</div>
        <input type="range" id="borderThreshold" min="1" max="20" value="5">
      </div>
      <div class="debug-section">
        <div class="debug-label">Pin size (corner pin): <span id="pinSizeValue">18</span>px</div>
        <input type="range" id="pinSize" min="10" max="40" value="18">
        <div class="debug-hint">Responsive: Mobile (&lt;768px) capped at 14px ¬∑ Desktop uses slider value</div>
      </div>
      <div class="debug-section">
        <div class="debug-label">Show indicators always (unchecked = focus-only):</div>
        <div class="debug-options">
          <label><input type="checkbox" data-indicator-visibility="background" checked> Blue background</label>
          <label><input type="checkbox" data-indicator-visibility="cornerpin"> Corner pin</label>
          <label><input type="checkbox" data-indicator-visibility="edgedots"> Edge dots</label>
          <label><input type="checkbox" data-indicator-visibility="brackets"> Brackets</label>
        </div>
      </div>
    </div>
  </details>
  <!-- END TEMPORARY DEBUG PANEL -->
</div>

<script src="https://cdn.jsdelivr.net/npm/markdown-it@14.1.0/dist/markdown-it.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/lz-string@1.5.0/libs/lz-string.min.js"></script>
<script src="matheval.js"></script>
<script src="csolver.js"></script>
<script src="reciparse.js"></script>
<script src="reciplogic.js"></script>
<script src="reciplates.js"></script>
<script src="reciplui.js"></script>
<script src="reciplier.js"></script>

<script>
// -----------------------------------------------------------------------------
// Stick this Javascript at the bottom of your html; it will insert a warning at
// the top of the page if it's loaded on an ancient browser that doesn't support
// modern Javascript.
function ancient_browser_check() {
  "use strict"                         // not sure if using "use strict" matters
  try { eval("let foo = (x)=>x+1") }   // feature detection: "let" & arrow funcs
  catch (e) { return true }            // bad browser, not understanding ES6, or
  return false                         // good browser, not being ancient; woot!
}
if (ancient_browser_check()) {
  //document.body.insertAdjacentHTML('afterbegin', '<h1>' + blah blah + '</h1>')
  // That works but the following version miiight be safer for ancient browsers:
  var body = document.body;  // wavy flashback lines: "var" not "let" or "const"
  var x = document.createElement("h1");
  x.innerHTML = "Ancient browser warning: nothing's gonna work here!";
  body.insertBefore(x, body.firstChild)          // ie, the very top of the page
}
// -----------------------------------------------------------------------------
</script>
</body>
</html>
